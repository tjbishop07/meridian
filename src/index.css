@import "tailwindcss";
@import "tw-animate-css";

/* Use .dark class for shadcn dark: variant compatibility */
@custom-variant dark (&:is(.dark *));

/* Map CSS custom properties to Tailwind color tokens */
@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-success: var(--success);
  --color-success-foreground: var(--success-foreground);
  --color-warning: var(--warning);
  --color-warning-foreground: var(--warning-foreground);
  --color-info: var(--info);
  --color-info-foreground: var(--info-foreground);
}

/* ── Dark theme (app default) ─────────────────────────────── */
:root,
[data-theme="dark"],
.dark {
  --radius: 0.5rem;

  /* Backgrounds — dark grey (VS Code / Linear style), clear layer separation */
  --background:          oklch(0.168 0.004 285);   /* dark grey ~#222 */
  --foreground:          oklch(0.96  0.002 285);   /* near-white */
  --card:                oklch(0.21  0.005 285);   /* slightly lifted grey */
  --card-foreground:     oklch(0.96  0.002 285);
  --popover:             oklch(0.21  0.005 285);
  --popover-foreground:  oklch(0.96  0.002 285);

  /* Brand — blue-500 */
  --primary:             oklch(0.623 0.214 259);
  --primary-foreground:  oklch(0.982 0.002 285);

  /* Surface variants */
  --secondary:           oklch(0.265 0.005 285);   /* raised surface */
  --secondary-foreground: oklch(0.96 0.002 285);
  --muted:               oklch(0.265 0.005 285);
  --muted-foreground:    oklch(0.58  0.008 285);   /* readable mid-grey */
  --accent:              oklch(0.265 0.005 285);
  --accent-foreground:   oklch(0.96  0.002 285);

  /* Semantic */
  --destructive:            oklch(0.628 0.258  29.2);  /* red-500 */
  --destructive-foreground: oklch(0.982 0      0);
  --success:                oklch(0.697 0.183 142.5);  /* green-500 */
  --success-foreground:     oklch(0.982 0      0);
  --warning:                oklch(0.768 0.168  70.08); /* amber-400 */
  --warning-foreground:     oklch(0.141 0      0);
  --info:                   oklch(0.686 0.182 233.8);  /* sky-500 */
  --info-foreground:        oklch(0.141 0      0);

  /* Borders / inputs */
  --border:  oklch(0.30  0.005 285);
  --input:   oklch(0.30  0.005 285);
  --ring:    oklch(0.623 0.214 259);
}

/* ── Light theme ──────────────────────────────────────────── */
[data-theme="light"] {
  --radius: 0.5rem;

  --background:          oklch(0.97  0.002 285);   /* zinc-50 */
  --foreground:          oklch(0.141 0.005 285);   /* zinc-900 */
  --card:                oklch(1.0   0     0);     /* white */
  --card-foreground:     oklch(0.141 0.005 285);
  --popover:             oklch(1.0   0     0);
  --popover-foreground:  oklch(0.141 0.005 285);

  --primary:             oklch(0.623 0.214 259);   /* blue-500 */
  --primary-foreground:  oklch(0.982 0.002 285);

  --secondary:           oklch(0.92  0.004 285);   /* zinc-100 */
  --secondary-foreground: oklch(0.141 0.005 285);
  --muted:               oklch(0.92  0.004 285);   /* zinc-100 */
  --muted-foreground:    oklch(0.5   0.01  285);   /* zinc-500 */
  --accent:              oklch(0.92  0.004 285);
  --accent-foreground:   oklch(0.141 0.005 285);

  --destructive:            oklch(0.577 0.245  27.3);
  --destructive-foreground: oklch(0.97  0      0);
  --success:                oklch(0.607 0.183 142.5);  /* green-600 */
  --success-foreground:     oklch(0.97  0      0);
  --warning:                oklch(0.668 0.168  70.08); /* amber-600 */
  --warning-foreground:     oklch(0.141 0      0);
  --info:                   oklch(0.576 0.182 233.8);  /* sky-600 */
  --info-foreground:        oklch(0.97  0      0);

  --border:  oklch(0.88  0.005 285);   /* zinc-200 */
  --input:   oklch(0.88  0.005 285);
  --ring:    oklch(0.623 0.214 259);
}

/* ── Money theme (refined emerald finance) ────────────────── */
[data-theme="money"] {
  --radius: 0.5rem;

  --background:          oklch(0.94  0.04  163);   /* light sage green */
  --foreground:          oklch(0.20  0.05  163);   /* deep forest green */
  --card:                oklch(0.97  0.015 163);   /* near-white green tint */
  --card-foreground:     oklch(0.20  0.05  163);
  --popover:             oklch(0.97  0.015 163);
  --popover-foreground:  oklch(0.20  0.05  163);

  --primary:             oklch(0.47  0.17  163);   /* rich forest green */
  --primary-foreground:  oklch(0.97  0     0);

  --secondary:           oklch(0.88  0.055 163);
  --secondary-foreground: oklch(0.20 0.05  163);
  --muted:               oklch(0.88  0.055 163);   /* slightly darker sage */
  --muted-foreground:    oklch(0.48  0.065 163);
  --accent:              oklch(0.88  0.055 163);
  --accent-foreground:   oklch(0.20  0.05  163);

  --destructive:            oklch(0.577 0.245  27.3);
  --destructive-foreground: oklch(0.97  0      0);
  --success:                oklch(0.607 0.183 142.5);
  --success-foreground:     oklch(0.97  0      0);
  --warning:                oklch(0.668 0.168  70.08);
  --warning-foreground:     oklch(0.141 0      0);
  --info:                   oklch(0.576 0.182 233.8);
  --info-foreground:        oklch(0.97  0      0);

  --border:  oklch(0.82  0.075 163);
  --input:   oklch(0.90  0.04  163);
  --ring:    oklch(0.47  0.17  163);
}

/* ── Sprout logo animations ───────────────────────────────── */
@keyframes sprout-sway {
  0%, 100% { transform: rotate(-4deg); }
  50%       { transform: rotate(4deg); }
}

@keyframes sprout-grow-in {
  0%   { transform: scale(0.3) rotate(0deg);  opacity: 0; }
  70%  { transform: scale(1.1) rotate(-2deg); opacity: 1; }
  100% { transform: scale(1)   rotate(-4deg); opacity: 1; }
}

.logo-sprout {
  transform-origin: center bottom;
  animation:
    sprout-grow-in 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) both,
    sprout-sway 3.5s ease-in-out 0.7s infinite;
}

/* ── Custom scrollbar ─────────────────────────────────────── */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--background);
}

::-webkit-scrollbar-thumb {
  @apply rounded-full;
  background: color-mix(in oklch, var(--foreground) 25%, transparent);
}

::-webkit-scrollbar-thumb:hover {
  background: color-mix(in oklch, var(--foreground) 35%, transparent);
}

/* ── Shimmer loading skeleton ─────────────────────────────── */
@keyframes shimmer {
  0%   { background-position: -1000px 0; }
  100% { background-position:  1000px 0; }
}

.animate-shimmer {
  animation: shimmer 2s infinite linear;
  background: linear-gradient(
    to right,
    var(--background) 0%,
    var(--muted)       20%,
    var(--background) 40%,
    var(--background) 100%
  );
  background-size: 1000px 100%;
}

/* ── Toast notifications ──────────────────────────────────── */
.toast-base,
.toast-success,
.toast-error,
.toast-warning,
.toast-info {
  @apply rounded-lg shadow-xl px-4 py-3 min-w-[300px] max-w-[500px] flex items-center gap-2;
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  z-index: 99999 !important;
}

.toast-base {
  background: color-mix(in oklch, var(--card) 90%, transparent);
  color: var(--foreground);
  border: 1px solid var(--border);
}

.toast-success {
  background: color-mix(in oklch, var(--success) 90%, transparent);
  color: var(--success-foreground);
  border: 1px solid var(--success);
}

.toast-error {
  background: color-mix(in oklch, var(--destructive) 90%, transparent);
  color: var(--destructive-foreground);
  border: 1px solid var(--destructive);
}

.toast-warning {
  background: color-mix(in oklch, var(--warning) 90%, transparent);
  color: var(--warning-foreground);
  border: 1px solid var(--warning);
}

.toast-info {
  background: color-mix(in oklch, var(--info) 90%, transparent);
  color: var(--info-foreground);
  border: 1px solid var(--info);
}
